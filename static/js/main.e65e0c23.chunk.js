(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,n){e.exports=n(301)},160:function(e,t,n){},180:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),i=n.n(c),s=(n(160),n(87)),o=n(17),u=n.n(o),l=n(25),p=n(42),f=n(127),m=n.n(f),h=n(128),d=n(83),v=n.n(d),b=new function e(){Object(h.a)(this,e),this.getCities=Object(l.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.openaq.org/v1/cities?country=GB&limit=112").then(function(e){return{result:e}}).catch(function(e){return{error:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),this.getCity=function(){var e=Object(l.a)(u.a.mark(function e(t){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://api.openaq.org/v1/latest?city=".concat(t)).then(function(e){return{result:e}}).catch(function(e){return{error:e}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},w=n(307),y=(n(180),Object(a.lazy)(function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,315))})),g=function(e){var t=e.cities,n=e.fetchCityCallback,c=e.cityList,i=(e.notification,e.onClick),s=Object(a.useState)({}),o=Object(p.a)(s,2),f=o[0],m=o[1];Object(a.useEffect)(function(){var e=t&&t.map(function(e){return{key:e.city,value:e.city,text:e.city}});m({dropdownOptions:e})},[t]);var h=function(){var e=Object(l.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.value){e.next=2;break}return e.abrupt("return");case 2:return t.target.blur(),e.next=5,n(a.value);case 5:document.activeElement.blur();case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-page container"},r.a.createElement("h1",{className:"search-page-title"},"Compare your Air"),r.a.createElement("p",{className:"search-page-description"},"Compare the air quality between cities in the uk. ",r.a.createElement("br",null),"Select cities to compare using the search tool below."),r.a.createElement("div",{className:"search-page-dropdown"},r.a.createElement(w.a,{icon:"search",placeholder:"Enter city name...",fluid:!0,search:!0,inline:!0,autoComplete:"on",selectOnNavigation:!1,selectOnBlur:!1,upward:!1,options:f.dropdownOptions,onChange:h})),r.a.createElement("div",{className:"city-card-list"},c&&c.results.map(function(e,t){return r.a.createElement(a.Suspense,{key:t,fallback:r.a.createElement("div",{className:"city-card-loading"},"Loading...")},r.a.createElement("div",{className:"city-card-container"},r.a.createElement(y,{city:e,onClick:i})))})))},O=function(){var e=Object(a.useState)({cities:[]}),t=Object(p.a)(e,2),n=t[0],c=t[1],i=Object(a.useState)({results:[]}),o=Object(p.a)(i,2),f=o[0],h=o[1];Object(a.useEffect)(function(){function e(){return(e=Object(l.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getCities();case 2:t=e.sent,c({cities:t.result.data.results});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var d=function(){var e=Object(l.a)(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getCity(t);case 2:n=e.sent,h({results:[n.result.data.results[0]].concat(Object(s.a)(f.results))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-page__container"},r.a.createElement(g,{cities:n.cities,fetchCityCallback:d,onClick:function(e){var t=f.results.filter(function(t){return t.city!==e});h({results:Object(s.a)(t)}),m()()},cityList:f}))};n(300);var E=function(){return r.a.createElement(O,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,1,2]]]);
//# sourceMappingURL=main.e65e0c23.chunk.js.map