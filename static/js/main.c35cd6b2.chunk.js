(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(t,e,a){t.exports=a(309)},163:function(t,e,a){},187:function(t,e,a){},188:function(t,e,a){},306:function(t,e,a){},307:function(t,e,a){},308:function(t,e,a){},309:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(30),i=a.n(c),o=(a(163),a(91)),s=a(16),u=a.n(s),l=a(24),p=a(43),d=a(130),m=a(86),f=a.n(m),h=new function t(){Object(d.a)(this,t),this.getCities=Object(l.a)(u.a.mark(function t(){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("https://api.openaq.org/v1/cities?country=GB&limit=112").then(function(t){return{result:t}}).catch(function(t){return{error:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),this.getCity=function(){var t=Object(l.a)(u.a.mark(function t(e){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("https://api.openaq.org/v1/latest?city=".concat(e)).then(function(t){return{result:t}}).catch(function(t){return{error:t}});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},y=a(315),v=a(44),w=a.n(v),g=function(t){var e=t.map(function(t){return w()(t.lastUpdated)});return function(t){try{var e=w.a.duration(w()().diff(t)),a=e._data;return console.log(a),a.years?"Updated ".concat(a.years," years ago"):a.months?"Updated ".concat(a.months," months ago"):7===a.days?"Updated a week ago":a.days>7?"Updated ".concat(Math.floor(a.days/7)," weeks ago"):1===a.days?"Updated ".concat(a.days," day ago"):a.days<7&&0!==a.days?"Updated ".concat(a.days," days ago"):1===a.hours?"Updated ".concat(a.hours," hour ago"):a.hours?"Updated ".concat(a.hours," hours ago"):null}catch(n){return null}}(w.a.max(e))};var b=a(131),k=a(132),E=(a(187),function(t){var e=t.city,a=t.onClick;return[r.a.createElement("button",{className:"city-card-cross",onClick:function(){console.log(e.city),a(e.city)}},r.a.createElement(k.a,{icon:b.a})),r.a.createElement("p",{className:"city-card-updated city-card-item"}," ",g(e.measurements)),r.a.createElement("h2",{className:"city-card-location-title city-card-item"},e.location),r.a.createElement("p",{className:"city-card-location-city city-card-item"}," In ",e.city,", United Kingdom"),r.a.createElement("p",{className:"city-card-measurements city-card-item"},"Values: ",e.measurements.map(function(t,a){return"".concat(t.parameter,": ").concat(t.value).concat(e.measurements.length-1===a?"":","," ")}))]}),O=(a(188),function(t){var e=t.cities,a=t.fetchCityCallback,c=t.cityList,i=(t.notification,t.onClick),o=Object(n.useState)({}),s=Object(p.a)(o,2),d=s[0],m=s[1];Object(n.useEffect)(function(){var t=e&&e.map(function(t){return{key:t.city,value:t.city,text:t.city}});m({dropdownOptions:t})},[e]);var f=function(){var t=Object(l.a)(u.a.mark(function t(e,n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.value){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,a(n.value);case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-page container"},r.a.createElement("h1",{className:"search-page-title"},"Compare your Air"),r.a.createElement("p",{className:"search-page-description"},"Compare the air quality between cities in the uk. ",r.a.createElement("br",null),"Select cities to compare using the search tool below."),r.a.createElement("div",{className:"search-page-dropdown"},r.a.createElement(y.a,{icon:"search",placeholder:"Enter city name...",fluid:!0,search:!0,inline:!0,autoComplete:"on",selectOnNavigation:!1,selectOnBlur:!1,upward:!1,options:d.dropdownOptions,onChange:f})),r.a.createElement("div",{className:"city-card-list"},c&&c.results.map(function(t,e){return r.a.createElement("div",{className:"city-card-container",key:e},r.a.createElement(E,{city:t,onClick:i}))})))}),j=(a(306),function(){var t=Object(n.useState)({cities:[]}),e=Object(p.a)(t,2),a=e[0],c=e[1],i=Object(n.useState)({results:[]}),s=Object(p.a)(i,2),d=s[0],m=s[1];Object(n.useEffect)(function(){function t(){return(t=Object(l.a)(u.a.mark(function t(){var e;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getCities();case 2:e=t.sent,c({cities:e.result.data.results});case 4:case"end":return t.stop()}},t)}))).apply(this,arguments)}!function(){t.apply(this,arguments)}()},[]);var f=function(){var t=Object(l.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.getCity(e);case 2:return a=t.sent,t.next=5,m({results:[].concat(Object(o.a)(d.results),[a.result.data.results[0]])});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),y=function(){var t=Object(l.a)(u.a.mark(function t(e){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=d.results.filter(function(t){return t.city!==e}),m({results:Object(o.a)(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"search-page__container"},r.a.createElement(O,{cities:a.cities,fetchCityCallback:f,onClick:y,cityList:d}))});a(307),a(308);var C=function(){return r.a.createElement(j,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[158,1,2]]]);
//# sourceMappingURL=main.c35cd6b2.chunk.js.map